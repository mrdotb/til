---
title: "Today I Learn 2"
date: "2020-03-15"
author: "mrdotb"
keywords: ["vim"]
---


# Vim learning

## Comparisons

```vim
:if 10 > 1
: echom "foo"
:endif
> foo
:if 10 > 11
: echom "foo"
:endif
```

### Case Sensitivity


The behavior of `==` depends on user's settings.
Always use `==?` for case-insensitive comparison, it doesn't depends of the use setting.
`==#` is the case-insentive comparison operator.

| --------------------- | -------------- | ---------- | ----------- |
| meaning               | use'ignorecase'| match case | ignore case |
| --------------------- | -------------- | ---------- | ----------- |
| equal                 | `==`           | `==#`      | `==?`       |
| not equal             | `!=`           | `!=#`      | `!=?`       |
| greater than          | `>`            | `>#`       | `>?`        |
| greater than or equal | `>=`           | `>=#`      | `>=?`       |
| smaller than          | `<`            | `<#`       | `<?`        |
| smaller than or equal | `<=`           | `<=#`      | `<=?`       |
| regexp matches        | `=~`           | `=~#`      | `=~?`       |
| regexp does not match | `!~`           | `!~#`      | `!~?`       |
| same instance         | `is`           | `is#`      | `is?`       |
| different instance    | `isnot`        | `isnot#`   | `isnot?`    |
| --------------------- | -------------- | ---------- | ----------- |


## Functions

__Vimscript functions must start with a capital letter if they are unscoped!__

```vim
:function Meow()
:  echom "Meow"
:endfunction
:call Meow()
> Meow

:function GetMeow()
:  return "Meow String"
:endfunction
:echom GetMeow()
> Meow String
```

Vimscript function have implicit returns of 0

```vim
:function TextwidthIsTooWide()
:  if &l:textwidth ># 80
:    return 1
:  endif
:endfunction
:set textwidth=80
:if TextwidthIsTooWide()
: echom "WARNING: Wide text!"
:endif
>
:set textwidth=100
:if TextwidthIsTooWide()
: echom "WARNING: Wide text!"
:endif
> WARNING: Wide text!
```

### Function Arguments

```vim
:function DisplayName(name)
:  echom "Hello! My name is:"
:  echom a:name
:endfunction
```

When you write vimscript function that takes arguments you always need to prefix
those arguments with `a:`

### Varargs

```vim
:function Varg(...)
:  echom a:0
:  echom a:1
:  echo a:000
:endfunction
:call Varg("a", "b")
```

The `...` tells Vim that this function can take any number of arguments.
a:0 will be equal to the number of arguments, here 2
a:1 will be a
a:2 will be b
a:000 will be a list containing all the extra arguments

### Numbers

Vimscript has two types of numeric variables: Numbers and Floats. A number is a 32 bit signed integer. A Float is a floating point number.

#### Numbers Formats

decimal

```vim
:echom 100
> 100
```

hexadecimal

```vim
:echom 0xff
> 255
```

octal

```vim
:echom 010
> 8
```

#### Float Formats

exponential notation

```vim
:echo 5.45e+3
:echo 5.45e-3
```

##### Coercion

Number and float will give a float.

```vim
:echo 2 * 2.0
> 4.0
```

#### Division

When dividing two Numbers, the remaindir is dropped.

```vim
:echo 3 / 2
> 1
:echo 3 / 2.0
> 1.5
```

### Strings

```vim
:echom "hello" . "world"
```


#### Special Characters

```vim
:echom "foo \"bar\""
> foo "bar"
```

```vim
:echo "a\nb"
> a
> b
:echom "a\nb"
> a^@b
```


#### Literal Strings

```vim
:echom '\n\\'
> \n\\
```

#### Truthiness

vim string are falsy


#### More espace sequences

```vim
:help expr-quote
```


### String Functions

#### Length

```vim
:echom strlen("foo")
> 3
:echom len("foo")
> 3
```



#### Splitting

```vim
:echo split("a b c d", " ")
> ['a','b','c','d']
```


#### Joining

```vim
:echo join(["a","b","c"], ",")
> "a,b,c"
```


#### Case

```vim
:echom tolower("Foo")
:echom toupper("Foo")
```

### Execute

The `execute` cmd is used to evaluate a string as if it were a vimscript command.


#### Basic Execution

```vim
:execute "echom 'Hello'"
```

### Normal

```vim
:normal G
```

The normal cmd simply takes a sequence of keys and pretends they were typed in normal mode.
Always use normal! to prevent hitting user mapping



### Execute normal


Common vimscript idiom.

```vim
execute "normal! gg/foo\<cr>dd"
```

#### Highlighting

```vim
set hlsearch incsearch
```

#### Magic

The `/` and `?` commands take RegExp.

No need to escape when you use literal strings 'string'

#### Very Magic

If you start RegExp with `\v` you will not have to worry about Vimscript three other regex modes.

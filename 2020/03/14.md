---
title: "Today I Learn 1"
date: "2020-03-14"
author: "mrdotb"
keywords: ["vim", "sed"]
---


# Command line problem of the day

How to replace a PATH by another one in a file with sed ?
You can change sed delimiter.


```bash
/, :, @
sed "s@hwmon-path.*@hwmon-path = $zone@g" $config
```

You can also escape the delimiter.

```bash
echo ${PWD//\//\\/}
sed "s/hwmon-path.*/hwmon-path = ${zone//\//\\/}/g" $config
```

# Vim learning

## Folding

| command | effect                         |
| ------- | ------------------------------ |
| zi      | switch folding on / off        |
| za      | toggle current fold            |
| zc      | close current fold             |
| zR      | open all folds                 |
| zM      | close all folds                |
| zV      | expand folds to reveal cursor  |
| zj      | move down to top of next fold  |
| zK      | move up to bottom of prev fold |

## Variables

```vim
:let foo = "bar"
:echo foo
> bar
:let foo = 42
:echo foo
> 42
```

## Options as Variables

```vim
:set textwidth=80
:echo &textwidth
> 80
```

Using a `&` in front of a name tells Vim we're referring to the option.

```vim
:set nowrap
:echo &wrap
> 0

:set wrap
:echo &wrap
> 1
```

We can also set options as variables using the `let` command.

```vim
:let &textwidth = 100
:set textwidth?
> textwidth=100
```

Why would we want to do this when when we could just use `set` ?

```vim
:let &textwidth = &textwidth + 10
:set textwidth?
```

When you `set` an option you can only use a single literal.
`let` is able to use the power of Vimscript to determine the value.


## Local Options

If you want to set the _local value_ of an option as a variable,
you need to prefix the variable name.

```vim
:let &l:number = 1
```

You can also read and set registers as variables.

```vim
:let @a = "hello"
:echo @a
> hello
```

## Variable Scoping

```vim
:let b:hello = "world"

```

This variable is local to the buffer
more info in `:help internal-variables`

## Conditionals

You can run multiples commands using the pipe `|` separator

## Basic If

```vim
:if 1
:  echom "ONE"
:endif
> 1
:if "test"
:  echom "test"
:endif
>
:if "12"
:  echom "12"
:endif
>
```

Vim coerce string to 0 otherwise the number inside.
Vim will execute the body of an if statement when its
condition evaluate to a non zero integer

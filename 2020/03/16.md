---
title: "Today I Learn 3"
date: "2020-03-16"
author: "mrdotb"
keywords: ["vim"]
---

# Vim learning

## Lists

Vimscript lists are ordered, heterogeneous collections of elements.

```vim
:echo ['foo', 3, 'bar']
> ['foo', 3, 'bar']
```

List can be nested.
```vim
:echo [[1], [2, 3]]
> [[1], [2, 3]]
```

## Indexing

Vimscript lists are zero-indexed.
```vim
:echo [0, 1][1]
> 1
```

## Slicing

Vim lists can be sliced
```vim
:echo ['a', 'b', 'c'][0:1]
> ['a', 'b']
:echo ['a', 'b', 'c'][:-1]
> ['a', 'b', 'c']
:echo ['a', 'b', 'c'][1:]
> ['b', 'c']
```

You can slice and index string as well.
```vim
:echo "abc"[0]
> a
```

You can combine Vim lists with `+`.
```vim
:echo [1] + [2]
> [1, 2]
```

## List Functions

```vim
:let foo = [1]
:call add(foo, 2)
:echo foo
> [1, 2]
:echo len(foo)
> 2
:echo get(foo, 0, 'default')
> 1
:echo get(foo, 2, 'default')
> default
:echo index(foo, 2)
> 1
:echo join(foo)
> 1 2
:echo join(foo, '-')
> 1-2
:echo reverse(foo)
> [2, 1]
```

## Looping

### For Loops
```vim
:let c = 0

:for i in [1,2,3,4]
: let c += 1
:endfor

:echom c
```

### While Loops
```vim
:let c = 1
:let total = 0

:while c <= 4
: let total += c
: let c+= 1
:endwhile

:echom total
```

## Dictionaries

```vim
:echo {'a': 1, 100: 'foo',}
> {'a': 1, 100: 'foo'}

:echo {'a': 1, 100: 'foo',}.a
:echo {'a': 1, 100: 'foo',}['a']
> 1

:let foo = {'a': 1}
:let foo.b = 2
:echo foo
```

### Removing Entries
```vim
:let foo = {'a': 1}
:let test = remove(foo, 'a'}
:unlet foo.a
:echo foo
```

### Dictionary Functions
```vim
:echom get({'a': 1}, 'a', 'default'})
> 1
:echom has_key({'a': 1}, 'a'})
> 1
:echo items({'a': 1, 'b':2 })
```


## Toggling

```vim
:setlocal number!
```


## Functional Programming

By default vim does not have immutable data structures but we can create some helper function to fake it to some degree.

### Functions as Variables

```vim
:let Myfunc = function("Append")
:echo Myfunc([1,2],3)
```

Functions can be stored in list
```vim
:let funcs = [function("Append"), function("Pop")]
:echo funcs[1](['a', 'b', 'c'], 1)
```

## Paths

Vimscript has a few built-in utilities that can be helpful when you need to work with paths.

### Absolute Paths

```vim
:echom expand('%')
:echom expand('%:p')
:echom fnamemodify('foo.txt', ':p')
```

`%` means the current file.
`:p` means the absolute path.
The third command displays an absolute path to the file `foo.txt` in the current directory.


### Listing Files

```vim
:echo globpath('.', '*')
:echo split(globpath('.', '*'), '\n')
:echo split(globpath('.', '*.txt'), '\n')
:echo split(globpath('.', '**'), '\n')
```

## Plugin Layout

`~/.vim/colors/`
color schemes

`~/.vim/plugin/`
run once every tume Vim starts

`~/.vim/ftdetect/`
ftdetect stands for "filetype detection". The files in this directory should set up autocommands that detect the filetype and nothing else.

`~/.vim/ftplugin/`
The naming of these file matters! When Vim sets a buffer's filetype to a value it then looks for a file in ftplugin

`~/.vim/indent/`
Like ftplugin for indent

`~/.vim/compiler/`
works like indent files. Should set compiler related options in the current buffer.

`~/vim/after`
will be loaded after vim/plugin

`~/vim/autoload/`
is a way to delay the loading of our plugin's code

`~/vim/doc/`
for plugin docs
